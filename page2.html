<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8">
  <title>เครื่องคิดเลข + บัญชีรายรับรายจ่าย</title>
  <style>
    :root{--bg:#ffffff;--card:#ffffff;--accent:#ffcedd;--muted:#ffcedd; }
    *{box-sizing:border-box;font-family:Inter, system-ui, -apple-system, "Segoe UI", Roboto, 'Noto Sans', 'Helvetica Neue', Arial}
    body{margin:0;background:var(--bg);color:#ffffff}
    header{background:#ffccd7;color: #ffffff; padding:16px 20px;display:flex;align-items:center;gap:16px;border-bottom:1px solid rgb(255, 221, 233)}
    header h1{font-size:18px;margin:0}
    .container{display:grid;grid-template-columns:1fr;gap:18px;padding:20px;max-width:600px;margin:18px auto}
    .card{background:var(--card);border-radius:12px;padding:14px;box-shadow:0 6px 18px rgba(255, 164, 199, 0.301);min-height:80px}
    .card h2{margin:0 0 10px 0;font-size:15px}

    /* เครื่องคิดเลข */
    .calc{display:grid;grid-template-columns:1fr;gap:8px;}
    .calc-screen{background:#ffcfd7;color:rgb(255, 255, 255);padding:12px;border-radius:8px;font-size:20px;text-align:right}
    .calc-buttons{display:grid;grid-template-columns:repeat(4,1fr);gap:8px}
    .calc-buttons button{padding:12px;border-radius:8px;border:1px solid rgb(255, 255, 255);background: #ffd9e1; color:#ffffff ;font-size:16px;cursor:pointer}

    /* บัญชี */
    .controls{display:flex;gap:8px;flex-wrap:wrap;margin-bottom:10px;}
    .controls input{padding:8px;border:1px solid #ffffff;border-radius:6px}
    .controls button{padding:8px 12px;border-radius:6px;border:1px solid #e7e7e7;background:#ffdbe4;color:#ffccd7;cursor:pointer}
    table{width:100%;border-collapse:collapse}
    th,td{padding:8px;border-bottom:1px solid #e7e7e7;text-align:left;font-size:14px}
    th{color:var(--muted);font-weight:600}
    .delete-btn{color:#ffcbd6;cursor:pointer}
  </style>
</head>
<body>
  <header><h1>เว็บเครื่องคิดเลข + บัญชีรายรับรายจ่าย</h1></header>
  <button onclick="window.location.href='index.html'"> < </button>
    <div style="margin-left:auto;display: flex; gap:16px;align-items: center;"></div>
  <div class="container">

    <!-- เครื่องคิดเลข -->
    <div class="card">
      <h2>เครื่องคิดเลข</h2>
      <div class="calc">
        <div class="calc-screen" id="calc-screen">0</div>
        <div class="calc-buttons">
          <button onclick="press('7')">7</button>
          <button onclick="press('8')">8</button>
          <button onclick="press('9')">9</button>
          <button onclick="press('/')">÷</button>
          <button onclick="press('4')">4</button>
          <button onclick="press('5')">5</button>
          <button onclick="press('6')">6</button>
          <button onclick="press('*')">×</button>
          <button onclick="press('1')">1</button>
          <button onclick="press('2')">2</button>
          <button onclick="press('3')">3</button>
          <button onclick="press('-')">−</button>
          <button onclick="press('0')">0</button>
          <button onclick="press('.')">.</button>
          <button onclick="calculate()">=</button>
          <button onclick="press('+')">+</button>
          <button onclick="clearCalc()">C</button>
        </div>
      </div>
    </div>

    <!-- บัญชี -->
    <div class="card">
      <h2>บัญชีรายรับ - รายจ่าย</h2>
      <input id="desc" type="text" placeholder="คำอธิบาย">
  <input id="amount" type="number" placeholder="จำนวนเงิน">
  <select id="type">
    <option value="income">รายรับ</option>
    <option value="expense">รายจ่าย</option>
  </select>
  <button onclick="addEntry()">บันทึก</button>
  
  <table>
    <thead>
      <tr>
        <th>คำอธิบาย</th>
        <th>รายรับ</th>
        <th>รายจ่าย</th>
        <th>เงินคงเหลือ</th>
        <th>ลบ</th>
      </tr>
    </thead>
    <tbody id="list"></tbody>
    <tfoot>
      <tr>
        <td>รวม</td>
        <td id="total-income">0</td>
        <td id="total-expense">0</td>
        <td id="balance">0</td>
        <td></td>
      </tr>
    </tfoot>
  </table>
</div>

<script>
/* ---- เครื่องคิดเลข ---- */
let calcScreen = document.getElementById('calc-screen');
let expression = "";

function press(val){
  expression += val;
  calcScreen.textContent = expression;
}
function calculate(){
  try {
    let result = eval(expression);
    calcScreen.textContent = result;
    expression = result.toString();
  } catch {
    calcScreen.textContent = "Error";
    expression = "";
  }
}
function clearCalc(){
  expression = "";
  calcScreen.textContent = "0";
}

/* ---- บัญชี ---- */
let list = document.getElementById("list");
let totalIncome = document.getElementById("total-income");
let totalExpense = document.getElementById("total-expense");
let balanceCell = document.getElementById("balance");

let data = JSON.parse(localStorage.getItem("account")) || [];

function render(){
  list.innerHTML = "";
  let income = 0, expense = 0, balance = 0;

  data.forEach((item,i)=>{
    if(item.type==="income"){ 
      income += Number(item.amount);
      balance += Number(item.amount);
    } else {
      expense += Number(item.amount);
      balance -= Number(item.amount);
    }
    list.innerHTML += `<tr>
      <td>${item.desc}</td>
      <td>${item.type==="income"?item.amount:"-"}</td>
      <td>${item.type==="expense"?item.amount:"-"}</td>
      <td>${balance}</td>
      <td><span class="delete" onclick="del(${i})">ลบ</span></td>
    </tr>`;
  });

  totalIncome.textContent = income;
  totalExpense.textContent = expense;
  balanceCell.textContent = income - expense;
}
render();

function addEntry(){
  let desc = document.getElementById("desc").value;
  let amount = document.getElementById("amount").value;
  let type = document.getElementById("type").value;

  if(desc && amount){
    data.push({desc, amount, type});
    localStorage.setItem("account",JSON.stringify(data));
    render();
    document.getElementById("desc").value="";
    document.getElementById("amount").value="";
  }
}

function del(i){
  data.splice(i,1);
  localStorage.setItem("account",JSON.stringify(data));
  render();
}
</script>
</body>
</html>
