<!doctype html>
<html lang="th">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Notebook & Tools</title>

 <style>
    /* Calculator */
.calc{display:grid;grid-template-columns:1fr 1fr;gap:8px}
.calc-screen{grid-column:1/-1;background:#0f1724;color:white;padding:12px;border-radius:8px;font-size:20px;text-align:right}
.calc-buttons{display:grid;grid-template-columns:repeat(4,1fr);gap:8px}
.calc-buttons button{padding:12px;border-radius:8px;border:1px solid rgba(16,24,40,0.04);font-size:16px;cursor:pointer}
 </style>

 <!-- Middle: Calculator & Quick stats -->
<section class="card">
<h2>เครื่องคิดเลข</h2>
<div class="calc">
<div id="calcScreen" class="calc-screen">0</div>
<div class="calc-buttons" id="calcButtons">
<button data-val="7">7</button>
<button data-val="8">8</button>
<button data-val="9">9</button>
<button data-op="/">÷</button>


<button data-val="4">4</button>
<button data-val="5">5</button>
<button data-val="6">6</button>
<button data-op="*">×</button>


<button data-val="1">1</button>
<button data-val="2">2</button>
<button data-val="3">3</button>
<button data-op="-">−</button>


<button data-val="0">0</button>
<button id="dot" data-val=".">.</button>
<button id="equals">=</button>
<button data-op="+">+</button>


<button id="clear" style="grid-column:span:2">C</button>
<button id="back">←</button>
<button id="memSave">MS</button>
<button id="memRecall">MR</button>
</div>
</div>


<hr style="margin:12px 0;border:none;border-top:1px solid #f1f3f8">


<h2>สรุปด่วน</h2>
<div class="small">รายการคงเหลือ: <strong id="todoCount">0</strong></div>
<div class="small">ยอดเงินสุทธิ (บัญชี): <strong id="netBalance">0.00</strong></div>
</section>

<script>
    /* ---------- Calculator ---------- */
const calcScreen = $('calcScreen');
let calcExp = '';
let mem = loadFromLS('calc_mem') || 0;
function updateScreen(){ calcScreen.textContent = calcExp || '0' }
document.querySelectorAll('#calcButtons button').forEach(b=>{
b.addEventListener('click', ()=>{
const v = b.dataset.val; const op = b.dataset.op;
if(v!==undefined){ calcExp += v; updateScreen(); saveToLS('calc_exp',calcExp); return }
if(op!==undefined){ // operator
calcExp += op; updateScreen(); return
}
if(b.id==='equals'){ try{ const res = Function('return '+calcExp)(); calcExp = String(res); updateScreen(); saveToLS('calc_last',calcExp); }catch(e){ alert('สูตรไม่ถูกต้อง'); } }
if(b.id==='clear'){ calcExp=''; updateScreen(); }
if(b.id==='back'){ calcExp = calcExp.slice(0,-1); updateScreen(); }
if(b.id==='memSave'){ try{ const val = parseFloat(calcExp||0); mem = val; saveToLS('calc_mem',mem); alert('เก็บค่าในหน่วยความจำ: '+mem); }catch(e){}};
if(b.id==='memRecall'){ calcExp += String(mem); updateScreen(); }
})
})
calcExp = loadFromLS('calc_exp') || '' ; updateScreen();
</script>
